<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>will you be my valentine?</title>

  <style>
    :root{
      --pink:#ff4d8d;
      --pink2:#ff8fb8;
      --dark:#b21f55;
      --paperText:#3b1f2b;
      --border: rgba(255,77,141,0.25);
      --shadow: rgba(255,77,141,0.25);
    }

    body{
      margin:0;
      min-height:100vh;
      display:grid;
      place-items:center;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: linear-gradient(180deg, #fff0f6, #ffe3ef);
      overflow:hidden;
      cursor: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='32' height='32'><text x='2' y='22' font-size='20'>%F0%9F%92%97</text></svg>") 4 20, auto;
      -webkit-tap-highlight-color: transparent;
    }

    /* floating hearts background */
    .hearts{
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index:0;
    }
    .heart{
      position:absolute;
      bottom:-40px;
      font-size:22px;
      opacity:0.6;
      animation: floatUp linear infinite;
      filter: drop-shadow(0 10px 18px rgba(255,77,141,0.18));
    }
    @keyframes floatUp{
      from{ transform: translateY(0); }
      to{ transform: translateY(-110vh); }
    }

    /* main question card */
    .card{
      width:min(620px, 92vw);
      padding:28px;
      border-radius:22px;
      background: rgba(255,255,255,0.55);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      border:1px solid var(--border);
      box-shadow:0 20px 60px var(--shadow);
      text-align:center;
      position:relative;
      z-index:2;
    }

    h1{
      margin:0 0 8px;
      font-size:32px;
      color:var(--dark);
    }

    #waitMsg{
      display:none;
      margin-bottom:10px;
      font-weight:700;
      color:var(--dark);
    }

    .stage{
      position:relative;
      height:170px;
      border-radius:18px;
      background: rgba(255,143,184,0.15);
      margin-bottom:16px;
      overflow:hidden;
    }

    button{
      border:none;
      border-radius:999px;
      padding:12px 18px;
      font-size:16px;
      font-weight:700;
      cursor:pointer;
      user-select:none;
      touch-action:none;
    }

    #yesBtn{
      background: linear-gradient(135deg, var(--pink), var(--pink2));
      color:white;
      margin-top:56px;
      animation: wiggle 3.5s ease-in-out infinite;
    }
    @keyframes wiggle{
      0%,84%,100%{transform:rotate(0deg)}
      88%{transform:rotate(-2deg)}
      92%{transform:rotate(2deg)}
      96%{transform:rotate(-1deg)}
    }

    #noBtn{
      position:absolute;
      background:white;
      color:var(--dark);
      border:1px solid rgba(255,77,141,0.35);
    }

    /* photo + delayed hint */
    #photoWrap{
      position:relative;
      display:none;
      margin-top:14px;
    }

    #yesPic, #noPic{
      display:none;
      max-width:100%;
      border-radius:16px;
      box-shadow:0 16px 40px rgba(255,77,141,0.25);
      cursor:pointer;
    }

    /* sign at top with arrow down */
    #clickMe{
      position:absolute;
      top:-52px;
      left:50%;
      transform:translateX(-50%);
      background: rgba(255,255,255,0.95);
      border:1px solid rgba(255,77,141,0.30);
      color:var(--dark);
      padding:8px 14px;
      border-radius:999px;
      font-weight:900;
      font-size:13px;
      box-shadow:0 10px 24px rgba(255,77,141,0.20);
      display:none;
      animation: bob 1.1s ease-in-out infinite;
      white-space:nowrap;
      z-index:3;
    }
    #clickMe::after{
      content:"";
      position:absolute;
      left:50%;
      bottom:-10px;
      transform:translateX(-50%);
      width:0; height:0;
      border-left:8px solid transparent;
      border-right:8px solid transparent;
      border-top:10px solid rgba(255,255,255,0.95);
      filter: drop-shadow(0 2px 2px rgba(255,77,141,0.25));
    }
    @keyframes bob{
      0%,100%{ transform:translateX(-50%) translateY(0); }
      50%{ transform:translateX(-50%) translateY(-6px); }
    }

    /* sparkle trail */
    .sparkle{
      position:fixed;
      width:10px;
      height:10px;
      border-radius:999px;
      background: rgba(255,77,141,0.75);
      box-shadow:
        0 0 14px rgba(255,77,141,0.55),
        0 0 30px rgba(255,143,184,0.35);
      pointer-events:none;
      animation: sparkle 1100ms ease-out forwards;
      z-index:9999;
      mix-blend-mode: multiply;
    }
    @keyframes sparkle{
      from{opacity:1; transform:translate(-50%,-50%) scale(1)}
      to{opacity:0; transform:translate(-50%,-50%) scale(0.12)}
    }

    /* heart explosion */
    .burst{
      position:fixed;
      font-size:20px;
      pointer-events:none;
      animation: burst 900ms ease-out forwards;
      z-index:9999;
    }
    @keyframes burst{
      from{opacity:1; transform:translate(0,0) scale(1)}
      to{opacity:0; transform:translate(var(--x), var(--y)) scale(0.3)}
    }

    /* LETTER AREA */
    #letter{
      display:none;
      width:min(1100px, 94vw);
      padding:22px 18px 18px;
      border-radius:22px;
      background: rgba(255,255,255,0.72);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      border:1px solid var(--border);
      box-shadow:0 20px 60px var(--shadow);
      position:relative;
      z-index:2;
    }

    #letterHeader{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-bottom:12px;
    }

    #letterTitle{
      margin:0;
      color:var(--dark);
      font-size:22px;
      letter-spacing:.2px;
    }

    #langBtn{
      background: rgba(255,77,141,0.12);
      border:1px solid rgba(255,77,141,0.35);
      color:var(--dark);
      padding:10px 14px;
      border-radius:999px;
      font-weight:800;
      cursor:pointer;
      white-space:nowrap;
    }
    #langBtn:hover{ background: rgba(255,77,141,0.18); }

    /* split layout: letter + playlist */
    #letterGrid{
      display:grid;
      grid-template-columns: 1fr;
      gap:16px;
      align-items:start;
    }
    @media (min-width: 980px){
      #letterGrid{
        grid-template-columns: 1fr 380px;
      }
    }

    /* paper */
    #paper{
      position:relative;
      border-radius:18px;
      overflow:hidden;
      border: 1px solid rgba(255,77,141,0.18);
      background:
        repeating-linear-gradient(
          180deg,
          rgba(255,255,255,0.96) 0px,
          rgba(255,255,255,0.96) 26px,
          rgba(255,77,141,0.06) 27px,
          rgba(255,77,141,0.06) 28px
        );
      box-shadow: 0 18px 45px rgba(255,77,141,0.18);
    }

    #paper::before, #paper::after{
      content:"";
      position:absolute;
      width:78px;
      height:26px;
      background: rgba(255,255,255,0.55);
      border: 1px solid rgba(255,77,141,0.16);
      box-shadow: 0 10px 18px rgba(255,77,141,0.12);
      transform: rotate(-6deg);
      top:10px;
      z-index:3;
      pointer-events:none;
    }
    #paper::before{ left:14px; }
    #paper::after{
      right:14px;
      transform: rotate(6deg);
    }

    #letterScroll{
      max-height: 60vh;
      overflow:auto;
      padding:22px 18px 16px;
      position:relative;
      z-index:2;
      scrollbar-width: thin;
    }
    #letterScroll::-webkit-scrollbar{ width:10px; }
    #letterScroll::-webkit-scrollbar-thumb{
      background: rgba(178,31,85,0.28);
      border-radius:999px;
      border: 3px solid rgba(255,255,255,0.55);
    }
    #letterScroll::-webkit-scrollbar-track{ background: transparent; }

    #letterText{
      white-space:pre-wrap;
      line-height:1.7;
      font-size:16px;
      color:var(--paperText);
      font-family: ui-serif, Georgia, "Times New Roman", serif;
    }

    #signature{
      margin-top:18px;
      display:flex;
      flex-direction:column;
      gap:6px;
      align-items:flex-end;
      font-family: ui-serif, Georgia, "Times New Roman", serif;
      color:var(--dark);
    }
    #signature .yours{
      font-style:italic;
      font-weight:600;
    }
    #signature .name{
      font-weight:800;
      letter-spacing:.2px;
    }

    .fadeTop, .fadeBottom{
      position:absolute;
      left:0; right:0;
      height:34px;
      pointer-events:none;
      z-index:4;
      transition: opacity .18s ease;
    }
    .fadeTop{
      top:0;
      background: linear-gradient(180deg, rgba(255,255,255,0.98), rgba(255,255,255,0));
      opacity:0;
    }
    .fadeBottom{
      bottom:0;
      background: linear-gradient(0deg, rgba(255,255,255,0.98), rgba(255,255,255,0));
      opacity:1;
    }

    /* playlist card (pink glass) */
    .spotify-wrap{
      padding:14px;
      border-radius:22px;
      background: rgba(255,255,255,0.55);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      border:1px solid rgba(255,77,141,0.28);
      box-shadow: 0 20px 45px rgba(255,77,141,0.22);
      position:relative;
      overflow:hidden;
    }
    .spotify-wrap::before{
      content:"";
      position:absolute;
      inset:-80px;
      background: radial-gradient(circle at 30% 20%, rgba(255,77,141,0.18), transparent 55%),
                  radial-gradient(circle at 70% 80%, rgba(255,143,184,0.18), transparent 55%);
      pointer-events:none;
    }

    .playlist-label{
      position:relative;
      text-align:center;
      margin-bottom:10px;
      font-weight:800;
      color:var(--dark);
      font-size:14px;
      letter-spacing:0.2px;
    }

    .spotify-wrap iframe{
      position:relative;
      border-radius:14px;
    }
  </style>
</head>

<body>
  <div class="hearts">
    <div class="heart" style="left:10%; animation-duration:12s;">ðŸ’—</div>
    <div class="heart" style="left:25%; animation-duration:10s;">ðŸ’–</div>
    <div class="heart" style="left:40%; animation-duration:14s;">ðŸ’˜</div>
    <div class="heart" style="left:55%; animation-duration:11s;">ðŸ’ž</div>
    <div class="heart" style="left:70%; animation-duration:13s;">ðŸ’“</div>
    <div class="heart" style="left:85%; animation-duration:12s;">ðŸ’—</div>
  </div>

  <div class="card" id="card">
    <h1>will you be my valentine? &lt;3</h1>
    <div id="waitMsg">thinking?</div>

    <div class="stage" id="stage">
      <button id="yesBtn" type="button">yes</button>
      <button id="noBtn" type="button">no</button>
    </div>

    <div id="photoWrap">
      <div id="clickMe">tap the photo</div>
      <img id="yesPic" src="yes.jpg" alt="yes">
      <img id="noPic" src="no.jpg" alt="no">
    </div>
  </div>

  <div id="letter">
    <div id="letterHeader">
      <h2 id="letterTitle">for luca</h2>
      <button id="langBtn" type="button">polish</button>
    </div>

    <div id="letterGrid">
      <div id="paper">
        <div class="fadeTop" id="fadeTop"></div>
        <div class="fadeBottom" id="fadeBottom"></div>

        <div id="letterScroll">
          <div id="letterText"></div>

          <div id="signature">
            <div class="yours" id="sigYours">yours,</div>
            <div class="name" id="sigName">marta</div>
          </div>
        </div>
      </div>

      <div class="spotify-wrap">
        <div class="playlist-label">music that makes me think of you</div>

        <iframe data-testid="embed-iframe"
          style="border-radius:12px"
          src="https://open.spotify.com/embed/playlist/2wSxwuUANGEvMWPhouZKA0?utm_source=generator"
          width="100%"
          height="152"
          frameBorder="0"
          allowfullscreen=""
          allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
          loading="lazy"></iframe>
      </div>
    </div>
  </div>

  <script>
    const yesBtn = document.getElementById("yesBtn");
    const noBtn  = document.getElementById("noBtn");
    const stage  = document.getElementById("stage");
    const yesPic = document.getElementById("yesPic");
    const noPic  = document.getElementById("noPic");
    const waitMsg = document.getElementById("waitMsg");

    const photoWrap = document.getElementById("photoWrap");
    const clickMe = document.getElementById("clickMe");

    const card = document.getElementById("card");
    const letter = document.getElementById("letter");

    const langBtn = document.getElementById("langBtn");
    const letterText = document.getElementById("letterText");
    const letterTitle = document.getElementById("letterTitle");
    const sigYours = document.getElementById("sigYours");
    const sigName = document.getElementById("sigName");

    const letterScroll = document.getElementById("letterScroll");
    const fadeTop = document.getElementById("fadeTop");
    const fadeBottom = document.getElementById("fadeBottom");

    /* YOUR TEXT (put anything you want here) */
    const englishLetter = `Lorem ipsum dolor sit amet consectetur adipiscing elit. Quisque faucibus ex sapien vitae pellentesque sem placerat. In id cursus mi pretium tellus duis convallis. Tempus leo eu aenean sed diam urna tempor. Pulvinar vivamus fringilla lacus nec metus bibendum egestas. Iaculis massa nisl malesuada lacinia integer nunc posuere. Ut hendrerit semper vel class aptent taciti sociosqu. Ad litora torquent per conubia nostra inceptos himenaeos.

Lorem ipsum dolor sit amet consectetur adipiscing elit. Quisque faucibus ex sapien vitae pellentesque sem placerat. In id cursus mi pretium tellus duis convallis. Tempus leo eu aenean sed diam urna tempor. Pulvinar vivamus fringilla lacus nec metus bibendum egestas. Iaculis massa nisl malesuada lacinia integer nunc posuere. Ut hendrerit semper vel class aptent taciti sociosqu. Ad litora torquent per conubia nostra inceptos himenaeos.

Lorem ipsum dolor sit amet consectetur adipiscing elit. Quisque faucibus ex sapien vitae pellentesque sem placerat. In id cursus mi pretium tellus duis convallis. Tempus leo eu aenean sed diam urna tempor. Pulvinar vivamus fringilla lacus nec metus bibendum egestas. Iaculis massa nisl malesuada lacinia integer nunc posuere. Ut hendrerit semper vel class aptent taciti sociosqu. Ad litora torquent per conubia nostra inceptos himenaeos.

Lorem ipsum dolor sit amet consectetur adipiscing elit. Quisque faucibus ex sapien vitae pellentesque sem placerat. In id cursus mi pretium tellus duis convallis. Tempus leo eu aenean sed diam urna tempor. Pulvinar vivamus fringilla lacus nec metus bibendum egestas. Iaculis massa nisl malesuada lacinia integer nunc posuere. Ut hendrerit semper vel class aptent taciti sociosqu. Ad litora torquent per conubia nostra inceptos himenaeos.`;

    const polishLetter = `Lorem ipsum dolor sit amet consectetur adipiscing elit. Quisque faucibus ex sapien vitae pellentesque sem placerat. In id cursus mi pretium tellus duis convallis. Tempus leo eu aenean sed diam urna tempor. Pulvinar vivamus fringilla lacus nec metus bibendum egestas. Iaculis massa nisl malesuada lacinia integer nunc posuere. Ut hendrerit semper vel class aptent taciti sociosqu. Ad litora torquent per conubia nostra inceptos himenaeos.

Lorem ipsum dolor sit amet consectetur adipiscing elit. Quisque faucibus ex sapien vitae pellentesque sem placerat. In id cursus mi pretium tellus duis convallis. Tempus leo eu aenean sed diam urna tempor. Pulvinar vivamus fringilla lacus nec metus bibendum egestas. Iaculis massa nisl malesuada lacinia integer nunc posuere. Ut hendrerit semper vel class aptent taciti sociosqu. Ad litora torquent per conubia nostra inceptos himenaeos.

Lorem ipsum dolor sit amet consectetur adipiscing elit. Quisque faucibus ex sapien vitae pellentesque sem placerat. In id cursus mi pretium tellus duis convallis. Tempus leo eu aenean sed diam urna tempor. Pulvinar vivamus fringilla lacus nec metus bibendum egestas. Iaculis massa nisl malesuada lacinia integer nunc posuere. Ut hendrerit semper vel class aptent taciti sociosqu. Ad litora torquent per conubia nostra inceptos himenaeos.

Lorem ipsum dolor sit amet consectetur adipiscing elit. Quisque faucibus ex sapien vitae pellentesque sem placerat. In id cursus mi pretium tellus duis convallis. Tempus leo eu aenean sed diam urna tempor. Pulvinar vivamus fringilla lacus nec metus bibendum egestas. Iaculis massa nisl malesuada lacinia integer nunc posuere. Ut hendrerit semper vel class aptent taciti sociosqu. Ad litora torquent per conubia nostra inceptos himenaeos.

Lorem ipsum dolor sit amet consectetur adipiscing elit. Quisque faucibus ex sapien vitae pellentesque sem placerat. In id cursus mi pretium tellus duis convallis. Tempus leo eu aenean sed diam urna tempor. Pulvinar vivamus fringilla lacus nec metus bibendum egestas. Iaculis massa nisl malesuada lacinia integer nunc posuere. Ut hendrerit semper vel class aptent taciti sociosqu. Ad litora torquent per conubia nostra inceptos himenaeos.

Lorem ipsum dolor sit amet consectetur adipiscing elit. Quisque faucibus ex sapien vitae pellentesque sem placerat. In id cursus mi pretium tellus duis convallis. Tempus leo eu aenean sed diam urna tempor. Pulvinar vivamus fringilla lacus nec metus bibendum egestas. Iaculis massa nisl malesuada lacinia integer nunc posuere. Ut hendrerit semper vel class aptent taciti sociosqu. Ad litora torquent per conubia nostra inceptos himenaeos.

Lorem ipsum dolor sit amet consectetur adipiscing elit. Quisque faucibus ex sapien vitae pellentesque sem placerat. In id cursus mi pretium tellus duis convallis. Tempus leo eu aenean sed diam urna tempor. Pulvinar vivamus fringilla lacus nec metus bibendum egestas. Iaculis massa nisl malesuada lacinia integer nunc posuere. Ut hendrerit semper vel class aptent taciti sociosqu. Ad litora torquent per conubia nostra inceptos himenaeos.

Lorem ipsum dolor sit amet consectetur adipiscing elit. Quisque faucibus ex sapien vitae pellentesque sem placerat. In id cursus mi pretium tellus duis convallis. Tempus leo eu aenean sed diam urna tempor. Pulvinar vivamus fringilla lacus nec metus bibendum egestas. Iaculis massa nisl malesuada lacinia integer nunc posuere. Ut hendrerit semper vel class aptent taciti sociosqu. Ad litora torquent per conubia nostra inceptos himenaeos.`;

    /* idle â€œthinking?â€ */
    let waitTimer = setTimeout(() => { waitMsg.style.display = "block"; }, 5000);
    function resetWait(){
      clearTimeout(waitTimer);
      waitMsg.style.display = "none";
      waitTimer = setTimeout(() => { waitMsg.style.display = "block"; }, 5000);
    }

    /* runaway NO (desktop + mobile) */
    function moveNo(e){
      if(e) e.preventDefault();
      resetWait();
      const maxX = Math.max(0, stage.clientWidth  - noBtn.offsetWidth);
      const maxY = Math.max(0, stage.clientHeight - noBtn.offsetHeight);
      noBtn.style.left = (Math.random() * maxX) + "px";
      noBtn.style.top  = (Math.random() * maxY) + "px";
    }
    noBtn.addEventListener("mouseenter", moveNo, { passive:false });
    noBtn.addEventListener("mousedown", moveNo, { passive:false });
    noBtn.addEventListener("click", moveNo, { passive:false });
    noBtn.addEventListener("touchstart", moveNo, { passive:false });
    noBtn.addEventListener("pointerdown", moveNo, { passive:false });
    noBtn.addEventListener("pointerenter", moveNo, { passive:false });

    /* heart explosion */
    function heartExplosion(x, y){
      const hearts = ["ðŸ’—","ðŸ’–","ðŸ’˜","ðŸ’ž","ðŸ’“"];
      for(let i=0;i<20;i++){
        const h = document.createElement("div");
        h.className = "burst";
        h.textContent = hearts[Math.floor(Math.random()*hearts.length)];
        h.style.left = x + "px";
        h.style.top  = y + "px";
        h.style.setProperty("--x", (Math.random()*240-120)+"px");
        h.style.setProperty("--y", (Math.random()*-260-70)+"px");
        document.body.appendChild(h);
        setTimeout(() => h.remove(), 900);
      }
    }

    /* click-me timer */
    let clickTimer = null;

    yesBtn.addEventListener("click", (e) => {
      resetWait();

      photoWrap.style.display = "block";
      yesPic.style.display = "block";
      noPic.style.display = "none";

      clickMe.style.display = "none";
      if(clickTimer) clearTimeout(clickTimer);
      clickTimer = setTimeout(() => { clickMe.style.display = "block"; }, 5000);

      const cx = (e && typeof e.clientX === "number") ? e.clientX : (window.innerWidth/2);
      const cy = (e && typeof e.clientY === "number") ? e.clientY : (window.innerHeight/2);
      heartExplosion(cx, cy);
    });

    /* letter scroll fades */
    function updateFades(){
      const top = letterScroll.scrollTop;
      const max = letterScroll.scrollHeight - letterScroll.clientHeight;
      fadeTop.style.opacity = top > 6 ? "1" : "0";
      fadeBottom.style.opacity = top < max - 6 ? "1" : "0";
    }
    letterScroll.addEventListener("scroll", updateFades);

    /* language toggle (your text only) */
    let isPolish = false;
    function applyLanguage(){
      if(isPolish){
        letterTitle.textContent = "dla luca";
        sigYours.textContent = "twoja,";
        sigName.textContent = "marta";
        langBtn.textContent = "english";
        letterText.textContent = polishLetter;
      }else{
        letterTitle.textContent = "for luca";
        sigYours.textContent = "yours,";
        sigName.textContent = "marta";
        langBtn.textContent = "polish";
        letterText.textContent = englishLetter;
      }
      letterScroll.scrollTop = 0;
      updateFades();
    }
    langBtn.addEventListener("click", () => {
      isPolish = !isPolish;
      applyLanguage();
    });

    /* open letter after photo click */
    yesPic.addEventListener("click", () => {
      if(clickTimer) clearTimeout(clickTimer);
      card.style.display = "none";
      letter.style.display = "block";
      applyLanguage();
      updateFades();
    });

    /* sparkle trail (longer/denser, everywhere) */
    let last = 0;
    function spawnSparkle(x, y){
      const s = document.createElement("div");
      s.className = "sparkle";
      s.style.left = x + "px";
      s.style.top  = y + "px";
      document.body.appendChild(s);
      setTimeout(() => s.remove(), 1200);
    }

    document.addEventListener("mousemove", (e) => {
      const now = performance.now();
      if(now - last < 12) return;
      last = now;

      spawnSparkle(e.clientX, e.clientY);
      if(Math.random() < 0.35) spawnSparkle(e.clientX + (Math.random()*18-9), e.clientY + (Math.random()*18-9));
    });

    document.addEventListener("touchmove", (e) => {
      const t = e.touches && e.touches[0];
      if(!t) return;

      const now = performance.now();
      if(now - last < 14) return;
      last = now;

      spawnSparkle(t.clientX, t.clientY);
      if(Math.random() < 0.35) spawnSparkle(t.clientX + (Math.random()*18-9), t.clientY + (Math.random()*18-9));
    }, { passive:true });

    /* init */
    moveNo();
    applyLanguage();
  </script>
</body>
</html>
